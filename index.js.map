{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// SimpleLightbox\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// iziToast\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loader = document.querySelector('.loader');\nconst container = document.querySelector('.gallery');\n\n// createGallery\nexport function createGallery(image) {\n  let markup = image\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n    <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t    <img \n\t\t      class=\"gallery-image\" \n\t\t      src=\"${webformatURL}\" \n\t\t      alt=\"${tags}\" \n\t    \t/>\n            <div class=\"gallery-info\">\n        <div class=\"info-item\">\n            <h3 class=\"title\">Likes</h3>\n            <p class=\"text\">${likes}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3 class=\"title\">Views</h3>\n            <p class=\"text\">${views}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3 class=\"title\">Comments</h3>\n            <p class=\"text\">${comments}</p>\n        </div>\n        <div class=\"info-item\">\n            <h3 class=\"title\">Downloads</h3>\n            <p class=\"text\">${downloads}</p>\n        </div>\n    </div>\n\t</a>\n    </li>\n    `\n    )\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  if (container) {\n    container.innerHTML = '';\n  }\n}\n\n// iziToast\nexport function iziToastFoo() {\n  iziToast.show({\n    titleColor: 'white',\n    backgroundColor: 'red',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    messageColor: 'white',\n    maxWidth: '322',\n    position: 'topRight',\n    iconUrl: 'icon/error.svg',\n  });\n}\n\n// IziToastLastFoo\n\nexport function IziToastLastFoo() {\n  iziToast.show({\n    titleColor: 'white',\n    backgroundColor: '#FFA000',\n    message: \"We're sorry, but you've reached the end of search results.\",\n    messageColor: 'white',\n    position: 'topRight',\n    iconUrl: 'icon/notification.svg',\n    close: false,\n  });\n}\n\n// loader\nexport function showLoader() {\n  loader.style.display = 'block';\n}\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\n// LoadMore\nconst BtnLoadMore = document.querySelector('.btn-load-more');\n\nexport function showLoadMoreButton() {\n  BtnLoadMore.style.display = 'block';\n}\nexport function hideLoadMoreButton() {\n  BtnLoadMore.style.display = 'none';\n}\n","// axios\nimport axios from 'axios';\n\nexport async function getImagesByQuery(query, page = 1) {\n  let response = await axios('https://pixabay.com/api/', {\n    params: {\n      key: '29412071-9345ed042e2c0766a655100be',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n      per_page: 15,\n    },\n  });\n  return {\n    hits: response.data.hits,\n    totalHits: response.data.totalHits,\n  };\n}\n","import {\n  createGallery,\n  clearGallery,\n  hideLoader,\n  showLoader,\n  iziToastFoo,\n  IziToastLastFoo,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions.js';\n\nimport { getImagesByQuery } from '/js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst input = form.querySelector('input');\n\ninput.required = false;\nlet inputValueGlobal = '';\nlet totalHits = 0;\nlet page = 1;\n\nform.addEventListener('submit', getCorrectImages);\n\nfunction getCorrectImages(event) {\n  event.preventDefault();\n  showLoader();\n  hideLoadMoreButton();\n  clearGallery();\n  const inpValue = input.value.trim();\n  if (inpValue === '') {\n    iziToastFoo();\n    clearGallery();\n    hideLoader();\n    hideLoadMoreButton();\n    return;\n  }\n  inputValueGlobal = inpValue;\n\n  getImagesByQuery(inpValue)\n    .then(({ hits, totalHits: total }) => {\n      totalHits = total;\n      if (hits.length === 0) {\n        iziToastFoo();\n        clearGallery();\n        hideLoadMoreButton();\n      } else {\n        createGallery(hits);\n        showLoadMoreButton();\n      }\n    })\n    .catch(error => console.log(error))\n\n    .finally(() => {\n      hideLoader();\n      input.value = '';\n    });\n}\n\nconst BtnLoadMore = document.querySelector('.btn-load-more');\nBtnLoadMore.addEventListener('click', LoadMoreFoo);\n\nasync function LoadMoreFoo() {\n  try {\n    showLoader();\n    hideLoadMoreButton();\n\n    page += 1;\n    const { hits } = await getImagesByQuery(inputValueGlobal, page);\n\n    if (hits.length === 0 || page * 15 >= totalHits) {\n      IziToastLastFoo();\n      hideLoader();\n    } else {\n      createGallery(hits);\n      showLoadMoreButton();\n    }\n\n    const card = document.querySelector('.gallery-item');\n    const cardHeight = card.getBoundingClientRect().height;\n    window.scrollBy({\n      left: 0,\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.log(error);\n    IziToastLastFoo();\n  } finally {\n    hideLoader();\n  }\n}\n"],"names":["lightbox","SimpleLightbox","loader","container","createGallery","image","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","iziToastFoo","iziToast","IziToastLastFoo","showLoader","hideLoader","BtnLoadMore","showLoadMoreButton","hideLoadMoreButton","getImagesByQuery","query","page","response","axios","form","input","inputValueGlobal","totalHits","getCorrectImages","event","inpValue","hits","total","error","LoadMoreFoo","cardHeight"],"mappings":"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"}